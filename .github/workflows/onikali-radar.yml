name: Ã–NIKA LI Daily Radar

on:
  schedule:
    - cron: '0 8 * * *'  # æ¯å¤©08:00 UTC
  workflow_dispatch:      # æ‰‹åŠ¨è§¦å‘

jobs:
  radar:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        pip install requests beautifulsoup4 python-telegram-bot
    
    - name: Run Layer 1 (Kimi) Radar
      env:
        TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
      run: |
        echo "ğŸ¸ Ã–NIKA LI Layer 1 å¯åŠ¨"
        echo "æ‰«æå›½å†…æ–°é—»æº..."
        # å®é™…Pythonè„šæœ¬ç¨åæ·»åŠ 
        echo "å®Œæˆ"
    
    - name: Check Layer 2-4 Status
      run: |
        echo "Layer 2 (DeepSeek): ${{ secrets.DEEPSEEK_API_KEY != '' && 'å·²é…ç½®' || 'å¾…é…ç½®' }}"
        echo "Layer 3 (Groq): ${{ secrets.GROQ_API_KEY != '' && 'å·²é…ç½®' || 'å¾…é…ç½®' }}"
        echo "Layer 4 (Claude): ${{ secrets.ANTHROPIC_API_KEY != '' && 'å·²é…ç½®' || 'å¾…é…ç½®' }}"
    
    - name: Send Telegram Notification
      env:
        TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
        TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
      run: |
        curl -s -X POST "https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage" \
          -d "chat_id=${TELEGRAM_CHAT_ID}" \
          -d "text=ğŸ¸ Ã–NIKA LI æ—¥æŠ¥%0Aâ”â”â”â”â”â”â”â”â”â”â”â”â”â”%0ALayer 1 (Kimi): è¿è¡Œä¸­%0ALayer 2-4: å¾…é…ç½®%0A%0Aæ˜å¤©é…ç½®API Keysåå¯ç”¨å®Œå…¨ä½“" \
          || echo "Telegramé€šçŸ¥å¾…é…ç½®"
